<!DOCTYPE html>
<html lang="fr">
<head>
<title>cmp sipa</title>
<meta charset="utf-8">
<meta name="robots" content="noindex">
<meta name="viewport" content="width=device-width">
    <link rel="stylesheet" media="all" href="oueststrap/oueststrap-of.min.css">
    <link rel="stylesheet" media="screen and (max-width: 979px)" href="oueststrap/oueststrap-of-small.min.css">
    <link rel="stylesheet" media="screen and (min-width: 980px)" href="oueststrap/oueststrap-of-medium.min.css">
    <link rel="stylesheet" media="screen and (min-width: 1280px)" href="oueststrap/oueststrap-of-large.min.css">

    <link rel="icon" href="oueststrap/favicon.ico" />

    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KKNG2FZ');</script>
    <!-- End Google Tag Manager -->

    <script id="sipacmp_loader"></script>
    <script>!function(e,a,c,n,t){if(a.__cmp=function(){var e=[],n=function(a,c,t){"ping"===a?t&&t({gdprAppliesGlobally:!!(n&&n.config&&n.config.storeConsentGlobally),cmpLoaded:!1}):e.push({command:a,parameter:c,callback:t})};return n.commandQueue=e,n.config=a.__cmp&&a.__cmp.config?a.__cmp.config:{},n.receiveMessage=function(a){var c=a&&a.data&&a.data.__cmpCall;c&&e.push({command:c.command,parameter:c.parameter,callback:function(e,n){var t={__cmpReturn:{returnValue:e,success:n,callId:c.callId}};a.source.postMessage(msgIsString?JSON.stringify(t):t,"*")}})},(a.attachEvent||a.addEventListener)("message",function(e){a.__cmp.receiveMessage(e)},!1),function e(){if(!a.frames.__cmpLocator)if(c.body){var n=c.createElement("iframe");n.style.display="none",n.name="__cmpLocator",c.body.appendChild(n)}else setTimeout(e,50)}(),n}(),!document.getElementById(t)){var s=c.createElement("script"),o=c.getElementsByTagName("script")[0];s.async=1,s.src="https://sipaof.mgr.consensu.org/sipacmp/js/sipa-cmp.min.js",s.type="text/javascript",s.id=t,o.parentNode.insertBefore(s,o)}}(0,window,document,0,"sipacmp_loader");</script>
</head>
<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KKNG2FZ"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <div class="container-of">
        <h1 class="titre-rubrique">SIPA CMP</h1>
        <p class="margin-large">CMP du groupe SIPA certifiée conforme par l’IAB</p>


        <p class="h2 titre-rubrique">Code du stub à mettre dans le <code>&lt;head></code>: </p>

        <div class="form">
            <textarea id="snippet" style="height: 200px;"><script>!function(e,a,c,n,t){if(a.__cmp=function(){var e=[],n=function(a,c,t){"ping"===a?t&&t({gdprAppliesGlobally:!!(n&&n.config&&n.config.storeConsentGlobally),cmpLoaded:!1}):e.push({command:a,parameter:c,callback:t})};return n.commandQueue=e,n.config=a.__cmp&&a.__cmp.config?a.__cmp.config:{},n.receiveMessage=function(a){var c=a&&a.data&&a.data.__cmpCall;c&&e.push({command:c.command,parameter:c.parameter,callback:function(e,n){var t={__cmpReturn:{returnValue:e,success:n,callId:c.callId}};a.source.postMessage(t,"*")}})},(a.attachEvent||a.addEventListener)("message",function(e){a.__cmp.receiveMessage(e)},!1),function e(){if(!a.frames.__cmpLocator)if(c.body){var n=c.createElement("iframe");n.style.display="none",n.name="__cmpLocator",c.body.appendChild(n)}else setTimeout(e,50)}(),n}(),!c.getElementById(t)){var o=c.createElement("script"),s=c.getElementsByTagName("script")[0];o.async=1,o.src="https://sipaof.mgr.consensu.org/sipacmp/js/sipa-cmp.min.js",o.type="text/javascript",o.id=t,s.parentNode.insertBefore(o,s)}}(0,window,document,0,"sipacmp_loader");</script></textarea>
            <button class="btn btn-n1" onclick="document.getElementById('snippet').select(); document.execCommand('copy');confirm('code copié!');">Copier le code dans le presse papier</button>
        </div>

        <p class="h3 titre-rubrique">Fonction pour réafficher le bandeau: </p>
        <div class="form">
            <textarea>__cmp.show();</textarea>
            <button class="btn btn-n2" onclick="__cmp.show();">Réafficher le bandeau</button>
        </div>

        <p class="h3 titre-rubrique">Récupérer le consentement reçu (attente validation) à la pub: </p>
        <p>L'appel à la fonction getUserConsent créer une promesse qui sera éxécutera la fonction callback lorsque l'utilisateur aura indiqué son choix. (que se soit un consentement ou un refus).</p>
        <p>Ca permet d'avoir par exemple un partenaire qui s'affiche dès la 1ere page visitée lorsque le bandeau sera validé.</p>
        <p>La fonction recoit en parametre un objet retour qui contient la propriété consent. Cette propriété est un objet qui contient un booléen pour chaque famille.</p>
        <p>Voici quelques exemple dans une fonction callback qui vous servent à intégrer un partenaire:</p>
        <div class="form">
            <textarea id="snippet4" style="height: 250px;">&lt;script>__cmp('getUserConsent', {}, function(e){
    if(e.consent){
        console.log('bandeau vu et pub acceptée ou refusée, mais mon partenaire est compatible IAB et gère le cookieless')
    }
    if(e.consent && e.consent.advertising){
        console.log('bandeau vu et pub acceptée')
    } else {
        console.log('bandeau vu et pub refusée')
    }
});&lt;/script></textarea>
            <button class="btn btn-n2 btn-petit" onclick="document.getElementById('snippet4').select(); document.execCommand('copy');confirm('code copié!');">Copier le code dans le presse papier</button>
        </div>


        <p class="h3 titre-rubrique">Nettoyer toutes les infos stockées: </p>
        <div class="form">
            <textarea>localStorage.clear();var top = location.hostname.split('.').reverse();top = top[1].length > 2 ? "." + top[1] + "." + top[0] : location.hostname;document.cookie = 'sipacmp_consent=;expires=Thu, 01 Jan 1970 00:00:00 GMT;';</textarea>
            <button class="btn btn-n2" onclick="localStorage.clear();var top = location.hostname.split('.').reverse();top = top[1].length > 2 ? '.' + top[1] + '.' + top[0] : location.hostname;document.cookie = 'sipacmp_consent=;expires=Thu, 01 Jan 1970 00:00:00 GMT;domain=' + top + ';path=/;'">Nettoyer</button>
        </div>

        <p class="h3 titre-rubrique">Paramètrage: </p>

        <p>Variable globale pour <strong>ne pas compter comme consentement</strong> lors de la navigation: </p>
        <p>Inclure ce script sur les pages où la navigation (scroll, clic sur un lien, rafraîchissement...) ne doit pas être considéré comme une acceptation (utile par exemple pour les pages de type mentions légales ou CGU)</p>
        <div class="form">
            <textarea>&lt;script>window.sipacmp_gcda = true; // _global_consent_doesnt_apply&lt;/script></textarea>
        </div>

        <p class="h3 titre-rubrique">Configuration: </p>

        <p class="margin-small">Il suffit de mettre les balises suivantes juste <strong>après</strong> l'appel "stub"</p>
        <div class="form" style="padding-left: 30px;">
            <ul>
                <li>
                    <h4>Pourcentage de scroll</h4>
                    <code>// consent dès 1pixel scrollé</code>
                    <textarea>&lt;script>window.__cmp.config.scrollPercent = 0; &lt;/script></textarea>
                    <code>// consent dès 20% scrollé</code>
                    <textarea>&lt;script>window.__cmp.config.scrollPercent = .20; &lt;/script></textarea>
                </li>
                <li>
                    <h4>Texte d’explication</h4>
                    <code>// html autorisé. <br/>Exemple en <strong>Template Strings</strong></code>
                    <textarea style="height: 200px;">&lt;script>window.__cmp.config.text = 'Texte personnalisé <a href="https://www.domain.com/lien-1/" target="_blank" data-trkcmp="lien 1">lien 1</a> et <a href="https://www.domain.com/lien-2/" target="_blank" data-trkcmp="lien 2">lien 2</a>, fin du texte.';&lt;/script></textarea>
                </li>
            </ul>
        </div>

        <p class="h3 titre-rubrique">Url de la liste globale téléchargée toutes les semaines: </p>
        <div class="form">
            <textarea>https://vendorlist.consensu.org/vendorlist.json</textarea>
        </div>
    </div>
    <script>__cmp('getUserConsent', {}, function(e){
        if(e.consent){
            console.log('bandeau vu et pub', e.consent.advertising)
        }
    });</script>

    <script src="../build/js/dev/sipa-cmp.min.js"></script>
</body>
</html>
