<!DOCTYPE html>
<html lang="fr">
<head>
<title>cmp sipa</title>
<meta charset="utf-8">
<meta name="robots" content="noindex">
<meta name="viewport" content="width=device-width">
    <link rel="stylesheet" media="all" href="oueststrap/oueststrap-of.min.css">
    <link rel="stylesheet" media="screen and (max-width: 979px)" href="oueststrap/oueststrap-of-small.min.css">
    <link rel="stylesheet" media="screen and (min-width: 980px)" href="oueststrap/oueststrap-of-medium.min.css">
    <link rel="stylesheet" media="screen and (min-width: 1280px)" href="oueststrap/oueststrap-of-large.min.css">

    <link rel="icon" href="oueststrap/favicon.ico" />

    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KKNG2FZ');</script>
    <!-- End Google Tag Manager -->

    <script id="sipacmp_loader"></script>
    <script>!function(e,a,c,n,t){if(a.__cmp=function(){var e=[],n=function(a,c,t){"ping"===a?t&&t({gdprAppliesGlobally:!!(n&&n.config&&n.config.storeConsentGlobally),cmpLoaded:!1}):e.push({command:a,parameter:c,callback:t})};return n.commandQueue=e,n.config=a.__cmp&&a.__cmp.config?a.__cmp.config:{},n.receiveMessage=function(a){var c=a&&a.data&&a.data.__cmpCall;c&&e.push({command:c.command,parameter:c.parameter,callback:function(e,n){var t={__cmpReturn:{returnValue:e,success:n,callId:c.callId}};a.source.postMessage(msgIsString?JSON.stringify(t):t,"*")}})},(a.attachEvent||a.addEventListener)("message",function(e){a.__cmp.receiveMessage(e)},!1),function e(){if(!a.frames.__cmpLocator)if(c.body){var n=c.createElement("iframe");n.style.display="none",n.name="__cmpLocator",c.body.appendChild(n)}else setTimeout(e,50)}(),n}(),!document.getElementById(t)){var s=c.createElement("script"),o=c.getElementsByTagName("script")[0];s.async=1,s.src="https://sipaof.mgr.consensu.org/sipacmp/js/sipa-cmp.min.js",s.type="text/javascript",s.id=t,o.parentNode.insertBefore(s,o)}}(0,window,document,0,"sipacmp_loader");</script>
</head>
<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KKNG2FZ"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <div class="container-of">

        <h1 class="titre-rubrique">SIPA CMP</h1>
        <p class="margin-large">CMP du groupe SIPA certifiée conforme par l’IAB</p>


        <p class="h2 titre-rubrique">Code du stub à mettre dans le <code>&lt;head></code>: </p>

        <div class="form">
            <textarea id="snippet" style="height: 300px;"><script>!function(e,a,c,n,t){if(a.__cmp=function(){var e=[],n=function(a,c,t){"ping"===a?t&&t({gdprAppliesGlobally:!!(n&&n.config&&n.config.storeConsentGlobally),cmpLoaded:!1}):e.push({command:a,parameter:c,callback:t})};return n.commandQueue=e,n.config=a.__cmp&&a.__cmp.config?a.__cmp.config:{},n.receiveMessage=function(a){var c=a&&a.data&&a.data.__cmpCall;c&&e.push({command:c.command,parameter:c.parameter,callback:function(e,n){var t={__cmpReturn:{returnValue:e,success:n,callId:c.callId}};a.source.postMessage(msgIsString?JSON.stringify(t):t,"*")}})},(a.attachEvent||a.addEventListener)("message",function(e){a.__cmp.receiveMessage(e)},!1),function e(){if(!a.frames.__cmpLocator)if(c.body){var n=c.createElement("iframe");n.style.display="none",n.name="__cmpLocator",c.body.appendChild(n)}else setTimeout(e,50)}(),n}(),!document.getElementById(t)){var s=c.createElement("script"),o=c.getElementsByTagName("script")[0];s.async=1,s.src="https://sipaof.mgr.consensu.org/sipacmp/js/sipa-cmp.min.js",s.type="text/javascript",s.id=t,o.parentNode.insertBefore(s,o)}}(0,window,document,0,"sipacmp_loader");</script></textarea>
            <button class="btn btn-n1" onclick="document.getElementById('snippet').select(); document.execCommand('copy');confirm('code copié!');">Copier le code dans le presse papier</button>
        </div>

        <p class="h3 titre-rubrique">Fonction pour réafficher le bandeau: </p>
        <div class="form">
            <textarea>__cmp.show();</textarea>
            <button class="btn btn-n2" onclick="__cmp.show();">Réafficher le bandeau</button>
        </div>

        <p class="h3 titre-rubrique">Variable globale pour ne pas compter comme consenement lors de la naviguation: </p>
        <div class="form">
            <textarea id="snippet2">&lt;script>window.sipacmp_gcda = true; // _global_consent_doesnt_apply&lt;/script></textarea>
            <button class="btn btn-n2 btn-petit" onclick="document.getElementById('snippet2').select(); document.execCommand('copy');confirm('code copié!');">Copier le code dans le presse papier</button>
        </div>


        <p class="h3 titre-rubrique">Récupérer le consentement à la pub: </p>
        <div class="form">
            <textarea id="snippet3" style="height: 250px;">&lt;script>__cmp('getConsentData', {}, function(e){
    var consent = __cmp.consent();
    if(consent && consent.advertising){
        console.log('pub acceptée')
    } else {
        console.log('pub pas acceptée')
    }
});&lt;/script></textarea>
            <button class="btn btn-n2 btn-petit" onclick="document.getElementById('snippet3').select(); document.execCommand('copy');confirm('code copié!');">Copier le code dans le presse papier</button>
        </div>

        <p class="h3 titre-rubrique">Nettoyer toutes les infos stockées: </p>
        <div class="form">
            <textarea>localStorage.clear();var top = location.hostname.split('.').reverse();top = top[1].length > 2 ? "." + top[1] + "." + top[0] : location.hostname;document.cookie = 'sipacmp_consent=;expires=Thu, 01 Jan 1970 00:00:00 GMT;';</textarea>
            <button class="btn btn-n2" onclick="localStorage.clear();var top = location.hostname.split('.').reverse();top = top[1].length > 2 ? '.' + top[1] + '.' + top[0] : location.hostname;document.cookie = 'sipacmp_consent=;expires=Thu, 01 Jan 1970 00:00:00 GMT;domain=' + top + ';path=/;'">Nettoyer</button>
        </div>

        <p class="h3 titre-rubrique">Paramètrage: </p>
        <p class="margin-small">Il suffit de mettre les balises suivantes juste <strong>après</strong> l'appel "stub"</p>
        <div class="form" style="padding-left: 30px;">
            <ul>
                <li>
                    <h4>Pourcentage de scroll</h4>
                    <code>// consent dès 1pixel scrollé</code>
                    <textarea>&lt;script>window.__cmp.config.scrollPercent = 0; &lt;/script></textarea>
                    <code>// consent dès 20% scrollé</code>
                    <textarea>&lt;script>window.__cmp.config.scrollPercent = .20; &lt;/script></textarea>
                </li>
                <li>
                    <h4>Texte d’explication</h4>
                    <code>// html autorisé. <br/>Exemple en <strong>Template Strings</strong></code>
                    <textarea style="height: 200px;">&lt;script>window.__cmp.config.text = `
    En poursuivant votre navigaton sur ce site, vous acceptez notre <a href="https://www.ouest-france.fr/politiquedeprotectiondesdonneespersonnelles/" target="_blank" data-trkcmp="lien données personnelles">politique de protection des données personnelles</a> et notre <a href="https://www.ouest-france.fr/politiquedeprotectiondesdonneespersonnelles/" target="_blank" data-trkcmp="lien cookies">politique cookies</a>, ainsi que le dépôt de cookies et technologies similaires destinés à réaliser des statistiques visant à évaluer le trafic et l’utilisation des services sur notre site, vous proposer des services éditoriaux et des publicités adaptés à vos centres d’intérêts et vous permettre de partager des contenus sur les réseaux sociaux.
`;&lt;/script></textarea>
                    <code>// pour la compatibilité avec les anciens navigateurs se referer à </code><a href="https://jack.ofspades.com/multiline-strings-in-es6-javascript/#multilinestringhacksines5">cette page</a>
                </li>
            </ul>
        </div>

        <p class="h3 titre-rubrique">Url de la liste globale téléchargée toutes les semaines: </p>
        <div class="form">
            <textarea>https://vendorlist.consensu.org/vendorlist.json</textarea>
        </div>
    </div>

    <script src="../build/js/dev/sipa-cmp.min.js"></script>
</body>
</html>
